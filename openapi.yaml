openapi: 3.0.3
info:
  title: Concours API
  description: API pour la gestion des utilisateurs, posts, commentaires et organisations
  version: 1.0.0
  contact:
    email: contact@concours.com

servers:
  - url: http://localhost:8000/api
    description: Serveur de développement local
  - url: https://api.concours.com
    description: Serveur de production

tags:
  - name: Authentication
    description: Endpoints d'authentification et gestion des utilisateurs
  - name: Social Authentication
    description: Authentification via réseaux sociaux
  - name: Posts
    description: Gestion des publications
  - name: Comments
    description: Gestion des commentaires
  - name: Categories
    description: Gestion des catégories de posts
  - name: Tags
    description: Gestion des tags de posts
  - name: Organizations
    description: Gestion des organisations

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Token d'authentification Sanctum

  schemas:
    Error:
      type: object
      properties:
        message:
          type: string
          description: Message d'erreur
        errors:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
          description: Détails des erreurs de validation

    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Identifiant unique de l'utilisateur
        email:
          type: string
          format: email
          description: Adresse email
        firstname:
          type: string
          description: Prénom
        lastname:
          type: string
          description: Nom de famille
        gender:
          type: string
          enum: [male, female, other]
          description: Genre
        phone:
          type: string
          nullable: true
          description: Numéro de téléphone
        avatar:
          type: string
          format: uri
          nullable: true
          description: URL de l'avatar
        date_of_birth:
          type: string
          format: date
          nullable: true
          description: Date de naissance
        organization_id:
          type: string
          format: uuid
          nullable: true
          description: ID de l'organisation
              name:
                type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Organization:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          description: Nom de l'organisation
        description:
          type: string
          description: Description de l'organisation
        users:
          type: array
          items:
            $ref: '#/components/schemas/User'
        users_count:
          type: integer
          description: Nombre d'utilisateurs
        created_at:
          type: string
          format: date-time

    UserCreator:
      type: object
      properties:
        id:
          type: string
          format: uuid
        firstname:
          type: string
        lastname:
          type: string
        avatar:
          type: string
          format: uri
          nullable: true

    Category:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          description: Nom de la catégorie
        slug:
          type: string
          description: Slug de la catégorie
        description:
          type: string
          nullable: true
          description: Description de la catégorie
        posts_count:
          type: integer
          description: Nombre de posts dans cette catégorie
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Tag:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          description: Nom du tag
        slug:
          type: string
          description: Slug du tag
        posts_count:
          type: integer
          description: Nombre de posts avec ce tag
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    PaginationMeta:
      type: object
      properties:
        current_page:
          type: integer
        per_page:
          type: integer
        total:
          type: integer
        last_page:
          type: integer

paths:
  # ============================================
  # AUTHENTICATION ENDPOINTS
  # ============================================
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Inscription d'un nouvel utilisateur
      description: Crée un nouveau compte utilisateur
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - firstname
                - lastname
                - gender
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  minLength: 8
                  example: password123
                password_confirmation:
                  type: string
                  format: password
                  example: password123
                firstname:
                  type: string
                  example: John
                lastname:
                  type: string
                  example: Doe
                gender:
                  type: string
                  enum: [male, female, other]
                  example: male
                phone:
                  type: string
                  nullable: true
                  example: "+33612345678"
                date_of_birth:
                  type: string
                  format: date
                  nullable: true
                  example: "1990-01-01"
      responses:
        '201':
          description: Utilisateur créé avec succès
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User registered successfully
                  user:
                    $ref: '#/components/schemas/User'
                  token:
                    type: string
                    example: 1|abcdef123456...
        '422':
          description: Erreur de validation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Connexion utilisateur
      description: Authentifie un utilisateur et retourne un token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  example: password123
      responses:
        '200':
          description: Connexion réussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login successful
                  user:
                    $ref: '#/components/schemas/User'
                  token:
                    type: string
                    example: 2|ghijkl789012...
        '401':
          description: Identifiants invalides
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid credentials
        '422':
          description: Erreur de validation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: Déconnexion utilisateur
      description: Révoque le token d'authentification actuel
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Déconnexion réussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Logged out successfully
        '401':
          description: Non authentifié
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthenticated

  /auth/me:
    get:
      tags:
        - Authentication
      summary: Profil utilisateur
      description: Récupère les informations de l'utilisateur connecté
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profil récupéré avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Non authentifié
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthenticated

  # ============================================
  # SOCIAL AUTHENTICATION ENDPOINTS
  # ============================================
  /auth/social/{provider}:
    post:
      tags:
        - Social Authentication
      summary: Authentification sociale
      description: Authentifie un utilisateur via un réseau social
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum: [google, facebook, github, twitter]
          description: Provider d'authentification sociale
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - access_token
              properties:
                access_token:
                  type: string
                  description: Token d'accès du provider social
                  example: ya29.a0AfH6SMBx...
      responses:
        '200':
          description: Authentification réussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login successful
                  user:
                    $ref: '#/components/schemas/User'
                  token:
                    type: string
                    example: 3|mnopqr345678...
        '422':
          description: Erreur de validation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/{provider}/redirect:
    get:
      tags:
        - Social Authentication
      summary: Redirection vers le provider social
      description: Génère l'URL de redirection vers le provider d'authentification
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum: [google, facebook, github, twitter]
      responses:
        '200':
          description: URL de redirection générée
          content:
            application/json:
              schema:
                type: object
                properties:
                  url:
                    type: string
                    format: uri
                    example: https://accounts.google.com/o/oauth2/auth...
        '404':
          description: Provider invalide
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid provider

  /auth/{provider}/callback:
    get:
      tags:
        - Social Authentication
      summary: Callback du provider social
      description: Traite le callback après authentification sociale
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum: [google, facebook, github, twitter]
        - name: code
          in: query
          required: false
          schema:
            type: string
          description: Code d'autorisation du provider
      responses:
        '200':
          description: Authentification réussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  user:
                    $ref: '#/components/schemas/User'
                  token:
                    type: string
        '404':
          description: Provider invalide
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid provider

  # ============================================
  # POSTS ENDPOINTS
  # ============================================
  /posts:
    get:
      tags:
        - Posts
      summary: Liste des posts
      description: Récupère la liste paginée des posts
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
            minimum: 1
            maximum: 100
          description: Nombre de posts par page
      responses:
        '200':
          description: Liste des posts récupérée
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Post'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'

    post:
      tags:
        - Posts
      summary: Créer un post
      description: Crée un nouveau post
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - content
              properties:
                title:
                  type: string
                  example: Mon premier post
                content:
                  type: string
                  example: Ceci est le contenu de mon post
                images:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: Images à joindre au post
                category_ids:
                  type: array
                  items:
                    type: string
                    format: uuid
                  description: IDs des catégories du post
                tag_ids:
                  type: array
                  items:
                    type: string
                    format: uuid
                  description: IDs des tags du post
      responses:
        '201':
          description: Post créé avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
        '401':
          description: Non authentifié
        '422':
          description: Erreur de validation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /posts/{post}:
    get:
      tags:
        - Posts
      summary: Détails d'un post
      description: Récupère les détails d'un post spécifique
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID du post
      responses:
        '200':
          description: Post récupéré avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
        '404':
          description: Post non trouvé

    put:
      tags:
        - Posts
      summary: Modifier un post
      description: Modifie un post existant
      security:
        - bearerAuth: []
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  example: Titre modifié
                content:
                  type: string
                  example: Contenu modifié
                images:
                  type: array
                  items:
                    type: string
                    format: binary
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
                category_ids:
                  type: array
                  items:
                    type: string
                    format: uuid
                  description: IDs des catégories du post
                tag_ids:
                  type: array
                  items:
                    type: string
                    format: uuid
                  description: IDs des tags du post
      responses:
        '200':
          description: Post modifié avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé
        '404':
          description: Post non trouvé
        '422':
          description: Erreur de validation

    delete:
      tags:
        - Posts
      summary: Supprimer un post
      description: Supprime un post existant
      security:
        - bearerAuth: []
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Post supprimé avec succès
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post deleted successfully
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé
        '404':
          description: Post non trouvé

  /posts/{post}/like:
    post:
      tags:
        - Posts
      summary: Liker un post
      description: Ajoute un like à un post
      security:
        - bearerAuth: []
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Like ajouté
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post liked successfully
        '401':
          description: Non authentifié
        '404':
          description: Post non trouvé

    delete:
      tags:
        - Posts
      summary: Unliker un post
      description: Retire le like d'un post
      security:
        - bearerAuth: []
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Like retiré
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post unliked successfully
        '401':
          description: Non authentifié
        '404':
          description: Post non trouvé

  /posts/{post}/likes:
    get:
      tags:
        - Posts
      summary: Liste des likes d'un post
      description: Récupère la liste paginée des utilisateurs ayant liké un post
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
      responses:
        '200':
          description: Liste des likes
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        user:
                          $ref: '#/components/schemas/User'
                        created_at:
                          type: string
                          format: date-time
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '404':
          description: Post non trouvé

  /posts/user/{user}:
    get:
      tags:
        - Posts
      summary: Posts d'un utilisateur
      description: Récupère la liste des posts d'un utilisateur spécifique
      parameters:
        - name: user
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
      responses:
        '200':
          description: Liste des posts de l'utilisateur
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Post'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '404':
          description: Utilisateur non trouvé

  # ============================================
  # COMMENTS ENDPOINTS
  # ============================================
  /posts/{post}/comments:
    get:
      tags:
        - Comments
      summary: Commentaires d'un post
      description: Récupère la liste des commentaires d'un post
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
      responses:
        '200':
          description: Liste des commentaires
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '404':
          description: Post non trouvé

    post:
      tags:
        - Comments
      summary: Créer un commentaire
      description: Ajoute un commentaire à un post
      security:
        - bearerAuth: []
      parameters:
        - name: post
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  example: Super post !
                parent_id:
                  type: string
                  format: uuid
                  nullable: true
                  description: ID du commentaire parent (pour les réponses)
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '201':
          description: Commentaire créé
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'
        '401':
          description: Non authentifié
        '404':
          description: Post non trouvé
        '422':
          description: Erreur de validation

  /comments/{comment}:
    get:
      tags:
        - Comments
      summary: Détails d'un commentaire
      description: Récupère les détails d'un commentaire
      parameters:
        - name: comment
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Commentaire récupéré
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'
        '404':
          description: Commentaire non trouvé

    put:
      tags:
        - Comments
      summary: Modifier un commentaire
      description: Modifie un commentaire existant
      security:
        - bearerAuth: []
      parameters:
        - name: comment
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  example: Commentaire modifié
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Commentaire modifié
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé
        '404':
          description: Commentaire non trouvé
        '422':
          description: Erreur de validation

    delete:
      tags:
        - Comments
      summary: Supprimer un commentaire
      description: Supprime un commentaire
      security:
        - bearerAuth: []
      parameters:
        - name: comment
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Commentaire supprimé
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Comment deleted successfully
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé
        '404':
          description: Commentaire non trouvé

  /comments/{comment}/replies:
    get:
      tags:
        - Comments
      summary: Réponses d'un commentaire
      description: Récupère les réponses à un commentaire
      parameters:
        - name: comment
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
      responses:
        '200':
          description: Liste des réponses
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '404':
          description: Commentaire non trouvé

  /comments/{comment}/like:
    post:
      tags:
        - Comments
      summary: Liker un commentaire
      description: Ajoute un like à un commentaire
      security:
        - bearerAuth: []
      parameters:
        - name: comment
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Like ajouté
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Comment liked successfully
        '401':
          description: Non authentifié
        '404':
          description: Commentaire non trouvé

    delete:
      tags:
        - Comments
      summary: Unliker un commentaire
      description: Retire le like d'un commentaire
      security:
        - bearerAuth: []
      parameters:
        - name: comment
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Like retiré
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Comment unliked successfully
        '401':
          description: Non authentifié
        '404':
          description: Commentaire non trouvé

  # ============================================
  # ORGANIZATIONS ENDPOINTS
  # ============================================
  /organizations:
    post:
      tags:
        - Organizations
      summary: Créer une organisation
      description: Crée une nouvelle organisation
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - description
              properties:
                name:
                  type: string
                  example: Mon Organisation
                description:
                  type: string
                  example: Description de mon organisation
      responses:
        '201':
          description: Organisation créée
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        '401':
          description: Non authentifié
        '422':
          description: Erreur de validation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /organizations/{organization}:
    get:
      tags:
        - Organizations
      summary: Détails d'une organisation
      description: Récupère les détails d'une organisation
      parameters:
        - name: organization
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Organisation récupérée
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        '404':
          description: Organisation non trouvée

  /organizations/{organization}/agents:
    post:
      tags:
        - Organizations
      summary: Créer un agent
      description: Crée un nouvel agent dans l'organisation
      security:
        - bearerAuth: []
      parameters:
        - name: organization
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - firstname
                - lastname
              properties:
                email:
                  type: string
                  format: email
                  example: agent@example.com
                firstname:
                  type: string
                  example: John
                lastname:
                  type: string
                  example: Doe
                phone:
                  type: string
                  nullable: true
                  example: "+33612345678"
                avatar:
                  type: string
                  format: uri
                  nullable: true
      responses:
        '201':
          description: Agent créé
          content:
            application/json:
              schema:
                type: object
                properties:
                  agent:
                    $ref: '#/components/schemas/User'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé
        '404':
          description: Organisation non trouvée
        '422':
          description: Erreur de validation

  /organizations/{organization}/admins:
    post:
      tags:
        - Organizations
      summary: Assigner un admin
      description: Assigne un utilisateur comme admin de l'organisation
      security:
        - bearerAuth: []
      parameters:
        - name: organization
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id:
                  type: string
                  format: uuid
                  description: ID d'un utilisateur existant
                email:
                  type: string
                  format: email
                  description: Email (si création d'un nouvel utilisateur)
                firstname:
                  type: string
                  description: Prénom (si création d'un nouvel utilisateur)
                lastname:
                  type: string
                  description: Nom (si création d'un nouvel utilisateur)
                phone:
                  type: string
                  nullable: true
                avatar:
                  type: string
                  format: uri
                  nullable: true
              oneOf:
                - required: [user_id]
                - required: [email, firstname, lastname]
      responses:
        '201':
          description: Admin assigné
          content:
            application/json:
              schema:
                type: object
                properties:
                  admin:
                    $ref: '#/components/schemas/User'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé
        '404':
          description: Organisation non trouvée
        '422':
          description: Erreur de validation

  # ============================================
  # CATEGORIES ENDPOINTS
  # ============================================
  /categories:
    get:
      tags:
        - Categories
      summary: Liste des catégories
      description: Récupère la liste paginée des catégories
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
            minimum: 1
            maximum: 100
          description: Nombre de catégories par page
      responses:
        '200':
          description: Liste des catégories récupérée
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'

    post:
      tags:
        - Categories
      summary: Créer une catégorie
      description: Crée une nouvelle catégorie (nécessite authentification et privilèges)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                description:
                  type: string
      responses:
        '201':
          description: Catégorie créée avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé (rôle requis super-admin, admin ou agent avec permission `edit categories`)
        '422':
          description: Erreur de validation

  /categories/{category}:
    get:
      tags:
        - Categories
      summary: Détails d'une catégorie
      description: Récupère les détails d'une catégorie spécifique
      parameters:
        - name: category
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Catégorie récupérée
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        '404':
          description: Catégorie non trouvée

    put:
      tags:
        - Categories
      summary: Modifier une catégorie
      description: Modifie une catégorie existante (nécessite authentification et privilèges)
      security:
        - bearerAuth: []
      parameters:
        - name: category
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
      responses:
        '200':
          description: Catégorie modifiée
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé (rôle requis super-admin, admin ou agent avec permission `edit categories`)
        '404':
          description: Catégorie non trouvée
        '422':
          description: Erreur de validation

    delete:
      tags:
        - Categories
      summary: Supprimer une catégorie
      description: Supprime une catégorie existante (nécessite authentification et privilèges)
      security:
        - bearerAuth: []
      parameters:
        - name: category
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Catégorie supprimée avec succès
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Catégorie supprimée avec succès
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé (rôle requis super-admin, admin ou agent avec permission `edit categories`)
        '404':
          description: Catégorie non trouvée

  # ============================================
  # TAGS ENDPOINTS
  # ============================================
  /tags:
    get:
      tags:
        - Tags
      summary: Liste des tags
      description: Récupère la liste paginée des tags
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
            minimum: 1
            maximum: 100
          description: Nombre de tags par page
      responses:
        '200':
          description: Liste des tags récupérée
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Tag'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          description: Non authentifié

    post:
      tags:
        - Tags
      summary: Créer un tag
      description: Crée un nouveau tag (nécessite authentification et privilèges)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
      responses:
        '201':
          description: Tag créé avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé (rôle requis super-admin, admin ou agent avec permission `edit tags`)
        '422':
          description: Erreur de validation

  /tags/{tag}:
    get:
      tags:
        - Tags
      summary: Détails d'un tag
      description: Récupère les détails d'un tag spécifique
      parameters:
        - name: tag
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Tag récupéré
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '404':
          description: Tag non trouvé

    put:
      tags:
        - Tags
      summary: Modifier un tag
      description: Modifie un tag existant (nécessite authentification et privilèges)
      security:
        - bearerAuth: []
      parameters:
        - name: tag
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
      responses:
        '200':
          description: Tag modifié
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé (rôle requis super-admin, admin ou agent avec permission `edit tags`)
        '404':
          description: Tag non trouvé
        '422':
          description: Erreur de validation

    delete:
      tags:
        - Tags
      summary: Supprimer un tag
      description: Supprime un tag existant (nécessite authentification et privilèges)
      security:
        - bearerAuth: []
      parameters:
        - name: tag
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Tag supprimé avec succès
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Tag supprimé avec succès
        '401':
          description: Non authentifié
        '403':
          description: Non autorisé (rôle requis super-admin, admin ou agent avec permission `edit tags`)
        '404':
          description: Tag non trouvé

